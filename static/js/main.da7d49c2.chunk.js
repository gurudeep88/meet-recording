(this["webpackJsonpdemo-kit"]=this["webpackJsonpdemo-kit"]||[]).push([[0],{317:function(e,t,n){},318:function(e,t,n){},354:function(e,t,n){"use strict";n.r(t);var o=n(0),a=n.n(o),i=n(42),r=n.n(i),c=(n(317),n(57)),s=(n(318),n(16)),d=n(49),u=n(30),l=n(9),p=n(400),b=n(417),f=n(407),j="#fff",v="rgba(255, 255, 255, 0.1)",h="#718EFF",g="#2616FF",m="#838798",x="#272931",O="#121317",y="#7D73FF",w="rgba(18,19,22,.8)",k="rgba(18,19,22,.01)",E="rgba(0,0,0,0.5)",I="linear-gradient(to right, #AABBFF, #A8A2FF 90%)",S="red",T=n(419),C=n(299),R=n(420),N=n(33),_="ADD_LOCAL_TRACK",L="UPDATE_LOCAL_TRACK",A="REMOVE_LOCAL_TRACK",D="ADD_CONFERENCE",P="ADD_CONNECTION",M="REMOVE_CONFERENCE",H="SET_DEVICES",z="REMOVE_CONNECTION",B="REMOVE_ALL_LOCAL_TRACK",F="LOCAL_TRACK_MUTE_CHANGED",U="ADD_REMOTE_TRACK",W="UPDATE_REMOTE_TRACK",V="REMOVE_REMOTE_TRACK",K="REMOTE_TRACK_MUTE_CHANGED",G="SET_LAYOUT",J="SET_FULLSCREEN_MODE",Y="SET_PROFILE",q="SET_MICROPHONE",X="SET_SPEAKER",Q="SET_CAMERA",Z="SET_PIN_PARTICIPANT",$="SET_PRESENTER",ee="ADD_COLOR",te="REMOVE_COLOR",ne="SET_AUDIO_LEVEL",oe="SHOW_NOTIFICATION",ae="SHOW_SNACKBAR",ie="SET_GOOGLE_API_STATE",re="UPDATE_PROFILE",ce="SET_MEETING_TITLE",se="SET_DISCONNECTED",de="SET_PRESENTATION_TYPE",ue="SET_HAND_RAISE",le="SET_MODERATOR",pe="PARTICIPANT_LEFT",be="SET_RESOLUTION",fe="SET_USER_RESOLUTION",je=function(e){return{type:_,payload:e}},ve=function(){return{type:F}},he=function(e){return{type:D,payload:e}},ge=n(31),me={file_recording_metadata:{share:!0}},xe="".concat("https://api.sariska.io/","api/v1/misc/generate-token"),Oe="exitFullScreen",ye="enterFullScreen",we="GRID",ke="SPEAKER",Ee=("https://s3.ap-south-1.amazonaws.com/".concat("meet.sariska.io","/static/media/living3_1005ac162f964b5f9e8499dfc5902250.jpeg"),"https://s3.ap-south-1.amazonaws.com/".concat("meet.sariska.io","/static/media/ocean2_c48fa44e731d22668107a6589ddc33db.jpeg"),"https://s3.ap-south-1.amazonaws.com/".concat("meet.sariska.io","/static/media/confetti_1296f69171bbef53d30ef80b6f201bf6.jpeg"),"https://s3.ap-south-1.amazonaws.com/".concat("meet.sariska.io","/static/media/books2_1a904eb291cb029f74c848d4604c0ed2.jpeg"),"https://s3.ap-south-1.amazonaws.com/".concat("meet.sariska.io","/static/media/trailer_182d4f7c61e37df010c786dfae0c879f.jpeg"),"https://s3.ap-south-1.amazonaws.com/".concat("meet.sariska.io","/static/media/camping_20abb6723b26f70457222e9fd0f4891d.jpeg"),"https://s3.ap-south-1.amazonaws.com/".concat("meet.sariska.io","/static/media/skyskrapers_02f52b6cea18f5f0384b7ac8db8ad86b.jpeg"),"https://s3.ap-south-1.amazonaws.com/".concat("meet.sariska.io","/static/media/fireworks_c41626c514ccf319a3edb470b4d04949.jpeg"),"https://s3.ap-south-1.amazonaws.com/".concat("meet.sariska.io","/static/media/clouds_bf46b8c3a1c02ee8628736254df3b587.jpeg"),"https://s3.ap-south-1.amazonaws.com/".concat("meet.sariska.io","/static/media/cafe_at_night_de428ba989b9d616ec90ae7440b0944b.jpeg"),"https://s3.ap-south-1.amazonaws.com/".concat("meet.sariska.io","/static/media/ocean_b26b6f03864ea9ebc1263d9c50f0c59b.jpeg"),"".concat("https://api.sariska.io/","api/v1/misc/get-presigned"),{busy:"Already Busy",error:"Something went wrong",resource_constraint:"Resource constraint",unexpected_request:"Recording or live streaming is already enabled",service_unavailable:"Service unavailable"});function Ie(e,t,n){return Se.apply(this,arguments)}function Se(){return(Se=Object(d.a)(Object(s.a)().mark((function e(t,n,o){var a,i,r;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({apiKey:"27fd6f9e85c304447d3cc0fb31e7ba8062df58af86ac3f9437",user:{id:t.id,avatar:o,name:n,email:t.email},exp:"48 hours"})},e.prev=1,e.next=4,fetch(xe,a);case 4:if(!(i=e.sent).ok){e.next=13;break}return e.next=8,i.json();case 8:return r=e.sent,localStorage.setItem("SARISKA_TOKEN",r.token),e.abrupt("return",r.token);case 13:console.log(i.status);case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),console.log("error",e.t0);case 19:case"end":return e.stop()}}),e,null,[[1,16]])})))).apply(this,arguments)}function Te(){return window.innerWidth<960}function Ce(){for(var e="#",t=0;t<6;t++)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return e}function Re(e){var t={level:e>.15?20:0,color:"rgba(255,255,255,0.4)"},n={level:parseFloat((2*t.level*e+t.level).toFixed(0)),color:"rgba(255,255,255,0.2)"};return t.blur=t.level?2:0,n.blur=n.level?6:0,["0 0 ".concat(t.blur,"px ").concat(t.level,"px ").concat(t.color),"0 0 ".concat(n.blur,"px ").concat(n.level,"px ").concat(n.color)].join(", ")}function Ne(e){var t=e.getHours(),n=e.getMinutes(),o=t>=12?"pm":"am";return(t=(t%=12)||12)+":"+(n=n<10?"0"+n:n)+" "+o}var _e=function(e){return{type:ee,payload:e}},Le=n(27),Ae=n(406),De=n(115),Pe=n.n(De),Me=n(130),He=n.n(Me),ze=n(171),Be=n.n(ze),Fe=n(170),Ue=n.n(Fe),We=n(416),Ve=n(3),Ke=Object(p.a)((function(e){return{root:{"& .MuiTextField-root":Object(l.a)({margin:e.spacing(1),width:function(e){return e.width||"25ch"},"& input":Object(l.a)({color:j,fontSize:"1.145vw"},e.breakpoints.down("sm"),{fontSize:"0.9rem"}),"&:hover":{"& .MuiInput-underline:before":{borderBottom:"2px solid ".concat(m)}}},e.breakpoints.down("sm"),{width:"285px !important"}),"& .MuiFormLabel-root":Object(l.a)({color:j,fontSize:"1.15vw"},e.breakpoints.down("sm"),{fontSize:"1rem"}),"& .MuiFormLabel-root.Mui-focused":{color:j,fontWeight:"800"},"& MuiInputBase-input":{color:j},"& .MuiInput-underline:before":{borderBottom:"1px solid ".concat(m)},"& .MuiInput-underline:after":{borderBottom:"2px solid ".concat(m)},"&.MuiInput-underline:hover:not(.Mui-disabled):before":{borderBottom:"1px solid ".concat(j)}}}}));function Ge(e){var t=e.label,n=e.width,o=e.value,a=e.onChange,i=e.onKeyPress,r=Ke({width:n});return Object(Ve.jsx)("form",{className:r.root,noValidate:!0,autoComplete:"off",children:Object(Ve.jsx)("div",{children:Object(Ve.jsx)(We.a,{id:t,label:t,value:o,onChange:a,onKeyPress:i})})})}var Je=function(e){return{type:Y,payload:e}},Ye=function(e){return{type:ce,payload:e}},qe=function(e){return{type:re,payload:e}},Xe=n(423),Qe=n(286),Ze=n.n(Qe);function $e(){var e=Object(o.useState)({documentWidth:void 0,documentHeight:void 0}),t=Object(u.a)(e,2),n=t[0],a=t[1];function i(){a({documentWidth:Math.max(document.documentElement.clientWidth||0,window.innerWidth||0),documentHeight:Math.max(document.documentElement.clientHeight||0,window.innerHeight||0)})}return Object(o.useLayoutEffect)((function(){return i(),window.addEventListener("resize",i),function(){return window.removeEventListener("resize",i)}}),[]),n}var et=Object(p.a)((function(){return{video:{}}})),tt=function(e){et();var t=e.track,n=e.isPresenter,a=(e.borderRadius,e.width,e.height,e.left,Object(o.useRef)(null));return Object(o.useEffect)((function(){null===t||void 0===t||t.attach(a.current)}),[t]),t?Object(Ve.jsx)("video",{playsInline:"1",autoPlay:"1",ref:a,style:{left:"-1px",top:"-1px",position:e.position||"absolute",width:"calc(100% + 2px)",height:e.height||"calc(100% + 2px)",objectFit:"contain",borderRadius:"8px",transform:n?"initial":"scaleX(-1)"}}):null},nt=function(e){var t=e.track,n=Object(o.useRef)(null);return Object(o.useEffect)((function(){if(t&&null!==n&&void 0!==n&&n.current)return t.attach(n.current),function(){t.detach(n.current)}}),[t]),Object(Ve.jsx)("audio",{playsInline:"1",autoPlay:"1",ref:n})},ot=n(285),at=n.n(ot),it=function(e){return{payload:e,type:G}},rt=function(e,t){return{type:Z,payload:{participantId:e,type:t}}},ct=n(422),st=Object(p.a)((function(e){return{root:{boxSizing:"border-box",border:"2px solid black",background:j,position:"relative",display:"flex",flexDirection:"column",zIndex:"99999"},controls:{cursor:"pointer",color:"white",height:"24px",width:"24px"},unpin:{color:"#27CED7","& svg":{fill:j}},pin:{fill:j,"& svg":{fill:j}}}})),dt=function(e){var t=e.pinnedParticipantId,n=e.togglePinParticipant,o=e.participantId,a=st();return Object(Ve.jsx)(b.a,{className:a.controls,children:t===o?Object(Ve.jsx)(ct.a,{title:"Unpin Partcipant",children:Object(Ve.jsx)(b.a,{onClick:function(){return n(null)},className:a.unpin,children:Object(Ve.jsx)("svg",{className:"MuiSvgIcon-root MuiSvgIcon-fontSizeMedium MuiBox-root css-1om0hkc",focusable:"false",viewBox:"0 0 24 24","aria-hidden":"true","data-testid":"PushPinIcon",children:Object(Ve.jsx)("path",{fillRule:"evenodd",d:"M16 9V4h1c.55 0 1-.45 1-1s-.45-1-1-1H7c-.55 0-1 .45-1 1s.45 1 1 1h1v5c0 1.66-1.34 3-3 3v2h5.97v7l1 1 1-1v-7H19v-2c-1.66 0-3-1.34-3-3z"})})})}):Object(Ve.jsx)(ct.a,{title:"Pin Partcipant",children:Object(Ve.jsx)(b.a,{onClick:function(){return n(o)},className:a.pin,children:Object(Ve.jsx)("svg",{className:"MuiSvgIcon-root MuiSvgIcon-fontSizeMedium MuiBox-root css-1om0hkc",focusable:"false",viewBox:"0 0 24 24","aria-hidden":"true","data-testid":"PushPinIcon",children:Object(Ve.jsx)("path",{fillRule:"evenodd",d:"M16 9V4h1c.55 0 1-.45 1-1s-.45-1-1-1H7c-.55 0-1 .45-1 1s.45 1 1 1h1v5c0 1.66-1.34 3-3 3v2h5.97v7l1 1 1-1v-7H19v-2c-1.66 0-3-1.34-3-3z"})})})})})},ut=n(85),lt=n.n(ut),pt=Math.floor(2.5),bt=Object(p.a)((function(e){return{root:{position:"absolute",lineHeight:"1.4px",display:"inline-block",left:"6px",top:"50%",marginTop:"-17px",width:"6px",height:"35px",zIndex:2,border:"none","& .audiodot-top, .audiodot-bottom, .audiodot-middle ":{opacity:0,display:"inline-block",width:"5px",lineHeight:"1px",height:"5px",borderRadius:"50%",background:h,margin:"1px 0 1px 0",transition:"opacity .25s ease-in-out","-moz-transition":"opacity .25s ease-in-out"},"& span.audiodot-top::after, span.audiodot-bottom::after, span.audiodot-middle::after":{content:"",display:"inline-block",width:"5px",height:"5px",borderRadius:"50%","-webkit-filter":"blur(.5px)",filter:"blur(.5px)",background:h}}}})),ft=function(e){for(var t=e.passedAudioLevel,n=bt(),o=5*("number"!==typeof t||isNaN(t)?0:Math.min(1.2*t,1)),a=[],i=0;i<5;i++){var r=pt-i,c=o-Math.abs(r),s=Math.min(1,Math.max(0,c)),d=void 0;d=0===r?"audiodot-middle":r<0?"audiodot-top":"audiodot-bottom",a.push(Object(Ve.jsx)("span",{className:d,style:{opacity:s}},i))}return Object(Ve.jsx)("div",{className:n.root,children:Object(Ve.jsx)("div",{className:"audioindicator in-react",children:a})})},jt=Object(p.a)((function(e){return{root:{background:"black",opacity:".6",color:"white",fontSize:"25px"}}}));function vt(e){var t=e.subtitle,n=jt(),o="".concat(t.name,": ").concat(t.text);return Object(Ve.jsx)(b.a,{className:n.root,children:o})}var ht=n(26),gt=JSON.parse(localStorage.getItem("SariskaReduxState")||"{}"),mt={name:gt.name,meetingTitle:"",googleAPIState:0,color:gt.color,avatar:gt.avatar,email:gt.email,id:gt.id,moderator:gt.moderator},xt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Y:var n=t.payload,o=n.name,a=n.email,i=n.avatar,r=n.id,c=n.moderator;n.color;return e.name=o,e.email=a,e.moderator=c,e.avatar=i,e.id=r,Object(ht.a)({},e);case re:return e[t.payload.key]=t.payload.value,Object(ht.a)({},e);case ce:var s=t.payload.meetingTitle;return e.meetingTitle=s,Object(ht.a)({},e);case ie:return e.googleAPIState=t.payload,Object(ht.a)({},e);default:return e}};var Ot=function(e){var t,n,a,i=e.participantTracks,r=e.participantDetails,c=e.localUserId,s=e.width,d=e.height,f=e.isPresenter,v=e.isActiveSpeaker,m=e.isFilmstrip,O=e.isLargeVideo,y=e.isTranscription,w=e.numParticipants,k=Object(p.a)((function(e){return{root:Object(l.a)({position:"relative",overflow:"hidden",borderRadius:"8px",background:x,display:"flex",flexDirection:"column",transform:"translateZ(0)","& .largeVideo":{height:e.spacing(20),width:e.spacing(20),fontSize:"40pt"}},e.breakpoints.down("sm"),{background:w>1?x:"transparent"}),audioBox:Object(l.a)({background:w>1?x:"transparent",position:"absolute",top:0,zIndex:1,display:"flex",justifyContent:"flex-end",padding:e.spacing(1),color:j,"& svg":Object(l.a)({background:x,borderRadius:"50%",padding:"5px"},e.breakpoints.down("sm"),{background:w>1?x:"transparent"})},e.breakpoints.down("sm"),{padding:e.spacing(.25,1,1,.25)}),controls:{cursor:"pointer",color:"white",height:"20px",width:"20px",position:"absolute",margin:"auto",top:0,left:0,bottom:0,right:0,padding:"8px"},videoBorder:{boxSizing:"border-box",border:"3px solid ".concat(h),borderRadius:"8px",position:"absolute",width:"100%",height:"100%",zIndex:"999"},textBox:{bottom:0,display:"flex",justifyContent:"flex-start",padding:e.spacing(1),color:j,background:"transparent",position:"absolute","& p":{padding:"2px 4px"}},avatarBox:{height:"100%",width:"100%",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",flexGrow:1},avatar:{borderRadius:"50%",position:"absolute",transition:"box-shadow 0.3s ease",height:1===w?e.spacing(20):e.spacing(10),width:1===w?e.spacing(20):e.spacing(10),fontSize:1===w&&"40pt"},rightControls:{display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",padding:e.spacing(1),right:0,zIndex:"9999"},handRaise:{marginLeft:"8px",color:g,lineHeight:"0!important"},disable:{background:S,borderColor:"".concat(S," !important"),"&:hover":{opacity:"0.8",background:"".concat(S," !important")}},subtitle:{position:"absolute",bottom:0},videoWrapper:{position:"absolute",right:0,left:0,top:0,bottom:0,margin:"auto"}}}))(),E=Object(Le.c)((function(e){return e.layout})),I=E.pinnedParticipant,T=E.raisedHandParticipantIds,R=f?null===i||void 0===i?void 0:i.find((function(e){return"desktop"===(null===e||void 0===e?void 0:e.getVideoType())})):null===i||void 0===i?void 0:i.find((function(e){return"video"===(null===e||void 0===e?void 0:e.getType())}));O&&!1===I.isPresenter&&(R=null===i||void 0===i?void 0:i.find((function(e){return"video"===e.getType()})));var N=null===i||void 0===i?void 0:i.find((function(e){return null===e||void 0===e?void 0:e.isAudioTrack()})),_=Object(Le.c)((function(e){return e.audioIndicator})),L=Object(Le.b)(),A=Object(o.useState)(!0),D=Object(u.a)(A,2),P=D[0],M=D[1],H=_[null===r||void 0===r?void 0:r.id],z=Object(Le.c)((function(e){return e.subtitle})),B=Object(Le.c)((function(e){return e.conference})),F=$e(),U=F.documentWidth,W=(F.documentHeight,lt()(k.avatar,{largeVideo:O})),V=lt()(k.avatarBox),K=function(e,t,n,o,a,i){var r=t,c=0;if(a)return{videoStreamHeight:t,videoStreamDiff:0};if(e>n)return{videoStreamHeight:9*n/16,videoStreamDiff:0};if(t*(16/9)<e){var s=e-16*t/9;r=9*(16*t/9+s)/16,c=16*t/9+s-e}else c=16*t/9-e;return{videoStreamHeight:r,videoStreamDiff:c}}(s,d,U,0,f),G=K.videoStreamHeight,J=K.videoStreamDiff,Y=(null===r||void 0===r?void 0:r.avatar)||(null===xt||void 0===xt?void 0:xt.color);return Object(Ve.jsxs)(b.a,{style:{width:"".concat(s,"px"),height:"".concat(d,"px")},onMouseEnter:function(){return M(!0)},onMouseLeave:function(){return M(!1)},className:k.root,children:[(null===B||void 0===B?void 0:B.getParticipantCount())>1&&v&&!f&&Object(Ve.jsx)("div",{className:k.videoBorder}),Object(Ve.jsxs)(b.a,{className:lt()(k.audioBox,{audioBox:!0}),children:[null!==N&&void 0!==N&&N.isMuted()?Object(Ve.jsx)(He.a,{}):Object(Ve.jsx)(Pe.a,{}),!(null!==N&&void 0!==N&&N.isLocal())&&Object(Ve.jsx)(nt,{track:N})]}),null!==(t=R)&&void 0!==t&&t.isMuted()?Object(Ve.jsx)(b.a,{className:V,children:Object(Ve.jsx)(Xe.a,{src:null,style:m?{boxShadow:Re(H),background:Y}:{background:Y},className:W,children:null===r||void 0===r||null===(n=r.name)||void 0===n||null===(a=n.slice(0,1))||void 0===a?void 0:a.toUpperCase()})}):Object(Ve.jsx)(b.a,{style:{width:function(e){return Te()&&f?"100%":"".concat(16*e/9,"px")}(G),height:"".concat(G,"px"),left:"-".concat(J/2,"px"),position:"absolute"},className:k.videoWrapper,children:Object(Ve.jsx)(tt,{isPresenter:f,track:R})}),Object(Ve.jsxs)(b.a,{className:lt()(k.rightControls,{rightControls:!0}),children:[P&&Object(Ve.jsx)(dt,{participantId:null===r||void 0===r?void 0:r.id,pinnedParticipantId:I.participantId,togglePinParticipant:function(e){L(rt(e,f))}}),T[null===r||void 0===r?void 0:r.id]&&Object(Ve.jsx)(C.a,{className:k.handRaise,children:Object(Ve.jsx)(at.a,{})})]}),Object(Ve.jsx)(b.a,{className:lt()(k.textBox,{userDetails:!0}),children:Object(Ve.jsx)(C.a,{children:c===(null===r||void 0===r?void 0:r.id)?"You":null===r||void 0===r?void 0:r.name})}),!m&&Object(Ve.jsx)(b.a,{children:Object(Ve.jsx)(ft,{passedAudioLevel:H})}),y&&z.text&&Object(Ve.jsx)(b.a,{className:k.subtitle,children:Object(Ve.jsx)(vt,{subtitle:z})})]})},yt=n.p+"static/media/Logo_Empty.1e6339b3.svg",wt=function(e){var t=e.width,n=e.height,o=(Object(Le.c)((function(e){return e.profile})),Object(Le.c)((function(e){return e.localTrack})).find((function(e){return null===e||void 0===e?void 0:e.isVideoTrack()}))),a=Object(p.a)((function(){return{logo:{display:"flex",textDecoration:"none",color:j,alignItems:"center",justifyContent:"center","&:hover":{textDecoration:"none",color:j}},logoImage:{width:t,height:n},logoText:{fontFamily:"'DM Sans', sans-serif",width:"fit-content",height:"63px",display:"flex",alignItems:"center",color:"".concat(j),fontSize:"1.2rem"}}}))();return Object(Ve.jsxs)(b.a,{className:a.logo,children:[Object(Ve.jsx)(T.a,{mdUp:!0,children:Object(Ve.jsx)("img",{src:null!==o&&void 0!==o&&o.isMuted()?yt:"https://assets.sariska.io/Logo_Sariska.svg",alt:"logo",className:a.logoImage})}),Object(Ve.jsx)(T.a,{mdDown:!0,children:Object(Ve.jsx)("img",{src:"https://assets.sariska.io/Logo_Sariska.svg",alt:"logo",className:a.logoImage})})]})},kt=function(e){var t=e.tracks,n=e.name,o=t.find((function(e){return e&&e.isVideoTrack()})),a=$e(),i=a.documentHeight,r=a.documentWidth,c=Object(Le.c)((function(e){var t;return null===(t=e.profile)||void 0===t?void 0:t.color})),s=Object(p.a)((function(e){return{localStream:{margin:"0px",position:"absolute",top:0,left:0,bottom:0,background:O,"& .widthAuto  video":{width:"auto!important"},"& .heightAuto  video":{height:"auto!important"}},logoContainer:{position:"absolute",top:null!==o&&void 0!==o&&o.isMuted()?"20px":"12px",zIndex:1,left:null!==o&&void 0!==o&&o.isMuted()?"20px":"12px"},avatarBox:{height:"100%",width:"100%",display:"flex",alignItems:"center",flexGrow:1,borderRadius:"5px"},avatar:Object(l.a)({borderRadius:"50%",position:"absolute",left:"calc(70%/1.2)",top:"calc(50vh - 96px)",transition:"box-shadow 0.3s ease",height:"200px",width:"200px",fontSize:n&&"125px",fontWeight:n&&"100",backgroundColor:c,"& span":{fontSize:"150px"},"& svg":{fontSize:"150px"}},e.breakpoints.down("sm"),{fontSize:"75px",left:"calc(41%/1.2)",top:"calc((100vh - 365px)/2)",height:"125px",width:"125px"}),videoWrapper:{"& > div":{borderRadius:0},"& .rightControls":{display:"none"},"& .userDetails":{display:"none"},"& .audioBox":{display:"none"}}}}))();return Object(Ve.jsxs)("div",{className:s.localStream,children:[Object(Ve.jsx)(T.a,{mdUp:!0,children:Object(Ve.jsx)(b.a,{className:s.logoContainer,children:Object(Ve.jsx)(wt,{height:null!==o&&void 0!==o&&o.isMuted()?"35px":"45px"})})}),null!==o&&void 0!==o&&o.isMuted()?Object(Ve.jsx)(b.a,{className:s.avatarBox,style:{width:r,height:i},children:Object(Ve.jsx)(Xe.a,{className:s.avatar,children:n?null===n||void 0===n?void 0:n.slice(0,1).toUpperCase():Object(Ve.jsx)(Ze.a,{})})}):Object(Ve.jsx)("div",{className:s.videoWrapper,style:{width:r,height:i,overflow:"hidden",position:"relative"},children:Object(Ve.jsx)(Ot,{width:r,height:i,participantTracks:t})})]})},Et=function(e){return{type:P,payload:e}},It=n(418),St=function(e){return{payload:e,type:oe}};function Tt(e){return Object(Ve.jsx)(It.a,Object(ht.a)({elevation:6,variant:"filled"},e))}var Ct=function(e){var t=e.notification,n=Object(o.useState)({open:!1}),a=Object(u.a)(n,2),i=a[0],r=a[1],c=Object(Le.b)();return Object(o.useEffect)((function(){r(!0),null!==t&&void 0!==t&&t.autoHide&&setTimeout((function(){r(!1),c(St({message:"",severity:"warning",autoHide:!0}))}),2e3)}),[null===t||void 0===t?void 0:t.message]),null!==t&&void 0!==t&&t.message?Object(Ve.jsx)(R.a,{anchorOrigin:{vertical:"top",horizontal:"center"},autoHideDuration:2e3,open:i,children:Object(Ve.jsx)(Tt,{classes:{maxWidth:"auto"},severity:t.severity,children:t.message})}):null},Rt=n(405),Nt=function(e){var t=e.disabled,n=e.onClick,o=e.buttonText,a=e.width,i=e.top,r=e.homeButton,c=e.fontSize,s=Object(p.a)((function(e){var t;return{anchor:(t={color:j,textDecoration:"none",border:"1px solid ".concat(h),padding:"4px 40px",borderRadius:"10px",textTransform:"capitalize",marginTop:i||e.spacing(3),width:a||"178.69px",transition:"0.1s all ease",fontSize:c||"0.875rem",minWidth:r&&"175px"},Object(l.a)(t,e.breakpoints.down("sm"),{width:a||"160.69px"}),Object(l.a)(t,"&:hover",{background:I,width:a||"178.69px",color:j,border:"1px solid transparent"}),Object(l.a)(t,"&:active",{background:I,width:a||"178.69px",color:j,border:"1px solid ".concat(h)}),Object(l.a)(t,"&:focus",{background:I,width:a||"178.69px",color:j,border:"1px solid ".concat(h)}),Object(l.a)(t,"&.MuiButton-root.Mui-disabled",{color:j,border:"1px solid ".concat(h)}),t)}}))();return Object(Ve.jsx)(Rt.a,{className:lt()(s.anchor,r?s.homeButton:""),disabled:t,onClick:n,children:o})},_t=n(22),Lt=Object(_t.a)({tooltipPlacementBottom:{margin:"0px 0"},tooltipPlacementTop:{margin:"0px 0"}})(ct.a),At=function(e){return Object(Ve.jsx)(Lt,Object(ht.a)(Object(ht.a)({},e),{},{children:e.children}))},Dt=function(e){var t=e.tracks,n=Object(c.f)(),i=Object(Le.c)((function(e){return e.localTrack})).find((function(e){return null===e||void 0===e?void 0:e.isAudioTrack()})),r=Object(Le.c)((function(e){return e.localTrack})).find((function(e){return null===e||void 0===e?void 0:e.isVideoTrack()})),f=Object(Le.b)(),m=Object(o.useState)(!1),x=Object(u.a)(m,2),O=x[0],I=x[1],_=Object(o.useState)(""),L=Object(u.a)(_,2),A=L[0],D=L[1],P=Object(o.useState)(""),M=Object(u.a)(P,2),H=M[0],z=M[1],B=Object(o.useState)("Start Meeting"),F=Object(u.a)(B,2),U=F[0],W=F[1],V=Object(o.useState)(!1),K=Object(u.a)(V,2),G=K[0],J=K[1],Y=Object(Le.c)((function(e){return e.profile})),q=Object(c.h)(),X=window.location.hash.indexOf("iAmRecorder")>=0,Q=window.location.hash.indexOf("testMode")>=0,Z=Object(Le.c)((function(e){return e.notification})),$=a.a.useState({right:!1}),ee=Object(u.a)($,2),te=(ee[0],ee[1],Object(o.useRef)(!0)),ne=Object(p.a)((function(e){return{root:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-start"},permissions:Object(l.a)({display:"flex",justifyContent:"space-around",paddingLeft:"0",paddingRight:"0",marginTop:"3.73vh","& svg":Object(l.a)({padding:"12px 0px",borderRadius:"7.5px",color:j,fontSize:"1.87vw","&:hover":{color:h,cursor:"pointer"}},e.breakpoints.down("sm"),{fontSize:"1.6rem"})},e.breakpoints.down("sm"),{marginTop:"10px !important",padding:"0 50px",width:"250px",margin:"auto"}),joinPermissions:Object(l.a)({display:"flex",justifyContent:"space-around",paddingLeft:"0",paddingRight:"0",marginTop:"3.73vh","& svg":Object(l.a)({padding:"12px 0px",borderRadius:"7.5px",color:j,fontSize:"1.87vw","&:hover":{color:h,cursor:"pointer"}},e.breakpoints.down("sm"),{fontSize:"1.6rem"})},e.breakpoints.down("sm"),{marginTop:"10px !important",padding:"0 50px",width:"250px",margin:"auto"}),disable:{background:S,"&:hover":{opacity:"0.8",background:"".concat(S," !important")}},textBox:{width:"100%"},userBox:Object(l.a)({marginTop:"1vh",marginBottom:"1vh"},e.breakpoints.down("sm"),{marginTop:"10px",marginBottom:"10px"}),moderatorBox:{display:"flex",justifyContent:"space-between",color:E,alignItems:"center",padding:"0px 8px 8px"},action:{opacity:.9},anchor:{color:j,textDecoration:"none",border:"1px solid ".concat(h),padding:e.spacing(.5,5),borderRadius:"10px",textTransform:"capitalize",marginTop:"5.4vh",width:"178.69px","&:hover":{fontWeight:"900",background:"linear-gradient(to right, ".concat(h,", ").concat(y,", ").concat(g,")")}},videoContainer:Object(l.a)({borderRadius:"4px",backgroundColor:w,backdropFilter:"blur(48px)","-webkit-backdrop-filter":"blur(48px)",transition:"background-color .2s ease",display:"flex",justifyContent:"space-between",flexDirection:"column",zIndex:1,padding:"1.74vw",border:"1px solid ".concat(v),marginLeft:"15%",marginRight:"auto",minHeight:"60vh"},e.breakpoints.down("md"),{padding:"24px 0",backgroundColor:null!==r&&void 0!==r&&r.isMuted()?w:k,border:"none",minHeight:"fit-content",borderRadius:"20px 20px 0px 0px",marginLeft:0,marginRight:0,width:"350px"}),logoContainer:{},header:Object(l.a)({color:j,textAlign:"center",fontSize:"2.385vw",fontWeight:300,marginTop:"5.5vh"},e.breakpoints.down("sm"),{fontSize:"1.7rem",marginTop:"0"}),headerJoin:Object(l.a)({color:j,textAlign:"center",fontSize:"2.385vw",fontWeight:300,marginTop:e.spacing(11)},e.breakpoints.down("sm"),{fontSize:"1.7rem",marginTop:"0"}),wrapper:Object(l.a)({margin:"2.3vh 0px 0.5vh 0px",position:"relative",textAlign:"center"},e.breakpoints.down("sm"),{marginTop:0,marginBottom:0}),buttonSuccess:{backgroundColor:g,"&:hover":{backgroundColor:g}},buttonProgress:{color:g,position:"absolute",bottom:"4.5vh",top:"30px",left:"50%",marginLeft:-12},buttonProgressJoin:{color:g,top:"30px",position:"absolute",bottom:"4.5vh",left:"50%",marginLeft:-12}}}))(),oe=function(){var e=Object(d.a)(Object(s.a)().mark((function e(){var t,n,o;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(A){e.next=3;break}return f(St({message:"Meeting Title is required",severity:"warning",autoHide:!0})),e.abrupt("return");case 3:return I(!0),t=null!==Y&&void 0!==Y&&Y.color?null===Y||void 0===Y?void 0:Y.color:Ce(),f(qe({key:"color",value:t})),e.next=8,Ie(Y,H,t);case 8:n=e.sent,(o=new N.a.JitsiConnection(n,A,!1)).addEventListener(N.a.events.connection.CONNECTION_ESTABLISHED,(function(){f(Et(o)),ae(o)})),o.addEventListener(N.a.events.connection.CONNECTION_FAILED,function(){var e=Object(d.a)(Object(s.a)().mark((function e(t){var n;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(" CONNECTION_DROPPED_ERROR",t),t!==N.a.errors.connection.PASSWORD_REQUIRED){e.next=6;break}return e.next=4,Ie(Y,H,te.current);case 4:n=e.sent,o.setToken(n);case 6:t===N.a.errors.connection.CONNECTION_DROPPED_ERROR&&f({type:se,payload:"lost"});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),o.addEventListener(N.a.events.connection.CONNECTION_DISCONNECTED,(function(e){console.log("connection disconnect!!!",e)})),o.connect();case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ae=function(){var e=Object(d.a)(Object(s.a)().mark((function e(o){var a;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=o.initJitsiConference(),t.forEach(function(){var e=Object(d.a)(Object(s.a)().mark((function e(t){return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.addTrack(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),a.addEventListener(N.a.events.conference.CONFERENCE_JOINED,(function(){I(!1),f(he(a)),f(Je(a.getLocalUser())),f(Ye({meetingTitle:A})),f(_e({participantId:null===a||void 0===a?void 0:a.myUserId(),color:null===Y||void 0===Y?void 0:Y.color}))})),a.addEventListener(N.a.events.conference.USER_ROLE_CHANGED,(function(e,t){console.log("USER_ROLE_CHANGED",e,t),a.isModerator()&&!Q?(a.enableLobby(),n.push("/".concat(A))):n.push("/".concat(A))})),a.addEventListener(N.a.events.conference.CONFERENCE_ERROR,(function(){I(!1)})),a.addEventListener(N.a.events.conference.USER_JOINED,(function(e){f(_e({participantId:e,color:Ce()}))})),a.addEventListener(N.a.events.conference.CONFERENCE_FAILED,function(){var e=Object(d.a)(Object(s.a)().mark((function e(t){var n;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t===N.a.errors.conference.MEMBERS_ONLY_ERROR&&(W("Asking to join"),a.joinLobby(H||(null===a||void 0===a||null===(n=a.getLocalUser())||void 0===n?void 0:n.name))),t===N.a.errors.conference.CONFERENCE_ACCESS_DENIED&&(J(!0),W("Join Meeting"),I(!1),setTimeout((function(){return J(!1)}),2e3));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),a.join();case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ie=function(){var e=Object(d.a)(Object(s.a)().mark((function e(){return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===i||void 0===i?void 0:i.unmute();case 2:f(ve());case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),re=function(){var e=Object(d.a)(Object(s.a)().mark((function e(){return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===i||void 0===i?void 0:i.mute();case 2:f(ve());case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ce=function(){var e=Object(d.a)(Object(s.a)().mark((function e(){return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===r||void 0===r?void 0:r.unmute();case 2:f(ve());case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),de=function(){var e=Object(d.a)(Object(s.a)().mark((function e(){return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===r||void 0===r?void 0:r.mute();case 2:f(ve());case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return X&&!A&&(console.log("first recorder",q.meetingId),z("recorder"),D(q.meetingId)),Object(o.useEffect)((function(){console.log("out state.meetingName && (testMode || iAmRecorder)",A,Q,X),A&&(Q||X)&&(console.log("state.meetingName && (testMode || iAmRecorder)",A,Q,X),oe())}),[A]),Object(o.useEffect)((function(){I(!(i&&r||X))}),[i,r]),Object(o.useEffect)((function(){q.meetingId&&(W("Join Meeting"),D(q.meetingId)),z(Y.name)}),[null===Y||void 0===Y?void 0:Y.name]),Object(Ve.jsxs)(b.a,{className:ne.root,children:[Object(Ve.jsx)(kt,{tracks:t,name:H}),Object(Ve.jsxs)(b.a,{className:ne.videoContainer,children:[Object(Ve.jsx)(T.a,{smDown:!0,children:Object(Ve.jsx)(b.a,{className:ne.logoContainer,children:Object(Ve.jsx)(wt,{height:"80px"})})}),Object(Ve.jsx)(b.a,{children:q.meetingId?Object(Ve.jsxs)(C.a,{className:ne.headerJoin,children:["Join ",q.meetingId]}):Object(Ve.jsx)(C.a,{className:ne.header,children:"Create Meeting"})}),Object(Ve.jsxs)(b.a,{className:q.meetingId?ne.joinPermissions:ne.permissions,children:[null!==i&&void 0!==i&&i.isMuted()?Object(Ve.jsx)(At,{title:"Unmute Audio",children:Object(Ve.jsx)(He.a,{onClick:ie})}):Object(Ve.jsx)(At,{title:"Mute Audio",children:Object(Ve.jsx)(Pe.a,{onClick:re})}),null!==r&&void 0!==r&&r.isMuted()?Object(Ve.jsx)(At,{title:"Unmute Video",children:Object(Ve.jsx)(Ue.a,{onClick:ce})}):Object(Ve.jsx)(At,{title:"Mute Video",children:Object(Ve.jsx)(Be.a,{onClick:de})})]}),Object(Ve.jsx)(b.a,{className:ne.action,children:Object(Ve.jsx)("div",{className:ne.wrapper,children:Object(Ve.jsxs)(b.a,{className:ne.textBox,children:[q.meetingId?null:Object(Ve.jsx)(Ve.Fragment,{children:Object(Ve.jsx)(Ge,{onKeyPress:function(e){"Enter"===e.key&&(e.preventDefault(),oe())},label:"Meeting Title",width:"20vw",value:A,onChange:function(e){D(e.target.value.toLowerCase().replace(/\s/g,""))}})}),Object(Ve.jsx)(b.a,{className:ne.userBox,children:Object(Ve.jsx)(Ge,{onKeyPress:function(e){"Enter"===e.key&&(e.preventDefault(),oe())},label:"Username",width:"20vw",value:H,onChange:function(e){z(e.target.value),1===e.target.value.length&&f(qe({key:"color",value:Ce()})),e.target.value||f(qe({key:"color",value:null}))}})})]})})}),Object(Ve.jsxs)(b.a,{style:{textAlign:"center",position:"relative"},children:[Object(Ve.jsx)(Nt,{homeButton:!0,disabled:O,onClick:oe,buttonText:U}),O&&Object(Ve.jsx)(Ae.a,{size:24,className:null!==q&&void 0!==q&&q.meetingId?ne.buttonProgressJoin:ne.buttonProgress})]})]}),Object(Ve.jsx)(R.a,{anchorOrigin:{vertical:"top",horizontal:"center"},autoHideDuration:2e3,open:G,message:"Conference access denied by moderator"}),Object(Ve.jsx)(Ct,{notification:Z})]})},Pt=function(e){return{type:H,payload:e}},Mt=function(e){return{type:Q,payload:e}},Ht=Object(p.a)((function(e){return{root:Object(l.a)({minHeight:"100vh",background:O,display:"flex",justifyContent:"center",alignItems:"center",color:"white"},e.breakpoints.down("sm"),{alignItems:"flex-end"}),gridContainer:{justifyContent:"space-around"},gridChild:Object(l.a)({},e.breakpoints.down("sm"),{width:"100%"})}})),zt=function(){var e=Object(Le.b)(),t=Object(Le.c)((function(e){var t;return null===(t=e.media)||void 0===t?void 0:t.resolution})),n=Object(Le.c)((function(e){return e.localTrack}));N.a.initialize(),N.a.setLogLevel(N.a.logLevels.ERROR);var a=Ht(),i=Object(o.useState)([]),r=Object(u.a)(i,2),c=r[0],l=r[1],p=window.location.hash.indexOf("iAmRecorder")>=0;return Object(o.useEffect)((function(){N.a.mediaDevices.enumerateDevices((function(t){e(Pt(t))}))}),[]),Object(o.useEffect)((function(){if(p)return console.log("home iAmRecorder",p),void l([]);if(!(n.length>0)){var o=function(){var n=Object(d.a)(Object(s.a)().mark((function n(){var o,a,i,r,c,d,p;return Object(s.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=[],n.prev=1,n.next=4,N.a.createLocalTracks({devices:["audio"],resolution:t});case 4:a=n.sent,i=Object(u.a)(a,1),r=i[0],o.push(r),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(1),console.log("failed to fetch audio device");case 13:return n.prev=13,n.next=16,N.a.createLocalTracks({devices:["video"],resolution:t});case 16:c=n.sent,d=Object(u.a)(c,1),p=d[0],o.push(p),n.next=25;break;case 22:n.prev=22,n.t1=n.catch(13),console.log("failed to fetch video device");case 25:l(o),o.forEach((function(t){return e(je(t))}));case 27:case"end":return n.stop()}}),n,null,[[1,10],[13,22]])})));return function(){return n.apply(this,arguments)}}();o()}}),[]),Object(Ve.jsx)(b.a,{className:a.root,children:Object(Ve.jsx)(f.a,{className:a.gridContainer,container:!0,children:Object(Ve.jsx)(f.a,{item:!0,md:12,className:a.gridChild,children:Object(Ve.jsx)(b.a,{children:Object(Ve.jsx)(Dt,{tracks:c})})})})})},Bt=Object(p.a)((function(e){return{root:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",background:O,"& h3":Object(l.a)({fontSize:"2rem",marginBottom:e.spacing(4)},e.breakpoints.down("sm"),{fontSize:"1.5rem"})},title:{color:j}}})),Ft=function(){var e=Object(Le.c)((function(e){var t;return null===(t=e.profile)||void 0===t?void 0:t.meetingTitle})),t=Bt(),n=Object(c.f)();return Object(Ve.jsxs)(b.a,{className:t.root,children:[Object(Ve.jsx)(C.a,{variant:"h3",className:t.title,children:"You have left the meeting"}),Object(Ve.jsxs)(b.a,{children:[Object(Ve.jsx)(Nt,{onClick:function(){return n.push("/".concat(e))},buttonText:"Rejoin"}),"\xa0 \xa0",Object(Ve.jsx)(Nt,{onClick:function(){return n.push("/")},buttonText:"Go to Home"})]})]})},Ut=n(12),Wt=n(188),Vt=n.n(Wt),Kt=n(289),Gt=n.n(Kt),Jt=n(421),Yt=n(424),qt=n(298),Xt=n(408),Qt=n(287),Zt=n.n(Qt),$t=n(288),en=n.n($t),tn=function(e){return{payload:e,type:ae}},nn=Object(p.a)((function(e){return{root:{width:"100%",backgroundColor:x,boxShadow:"none",color:j,"& .MuiList-padding":{paddingTop:"0px"},"& ul>li:first-child":{marginTop:0},"& .MuiListItem-root":{height:"40px",marginTop:"10px",marginBottom:"20px",paddingLeft:"6px",borderRadius:"7.5px","&:hover":{backgroundColor:m,borderRadius:"7.5px"}},"& span.material-icons":{color:j},"& svg":{color:j}},drawer:{"& .MuiDrawer-paper":{overflow:"hidden",top:"64px",height:"82%",right:"10px",borderRadius:"10px"}},detailedList:{width:"360px",padding:e.spacing(3),"& h6":{paddingLeft:"10px"}},title:{color:x,fontWeight:"900"},header:Object(l.a)({marginBottom:"24px"},e.breakpoints.down("sm"),{display:"flex",alignItems:"center",justifyContent:"space-between"}),cardTitle:Object(l.a)({color:j,fontWeight:"400",marginLeft:"8px",fontSize:"28px",lineHeight:"1"},e.breakpoints.down("sm"),{fontSize:"24px"}),urlBox:{padding:"24px 10px","& h5":{fontSize:"1rem",fontWeight:"900",paddingBottom:e.spacing(2)}},stopRecording:{color:"".concat(h," !important")},stopCaption:{color:"".concat(h," !important")},startCaption:{color:"white"},startRecording:{color:j},virtualList:{overflowY:"scroll",height:"95%"},settingsList:{}}}));function on(e){e.dominantSpeakerId;var t=e.featureStates,n=(e.setLayoutAndFeature,e.onClick),i=nn(),r=Object(Le.c)((function(e){return e.conference})),c=Object(Le.b)(),l=Object(o.useRef)(null),p=a.a.useState({right:!1}),f=Object(u.a)(p,2),j=(f[0],f[1],function(){var e=Object(d.a)(Object(s.a)().mark((function e(){var n;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.recording){e.next=2;break}return e.abrupt("return");case 2:if("none"!==(null===r||void 0===r?void 0:r.getRole())){e.next=4;break}return e.abrupt("return",c(St({severity:"info",autoHide:!0,message:"You are not moderator!!"})));case 4:return c(tn({severity:"info",message:"Starting Recording",autoHide:!1})),e.next=7,r.startRecording({mode:N.a.constants.recording.mode.FILE,appData:JSON.stringify(me)});case 7:n=e.sent,console.log("first session",n),l.current=n;case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()),v=function(){var e=Object(d.a)(Object(s.a)().mark((function e(){return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("stopRecording",t),t.recording){e.next=4;break}return console.log("stopRecording if",t),e.abrupt("return");case 4:if(console.log("stopRecording after",t),"none"!==(null===r||void 0===r?void 0:r.getRole())){e.next=7;break}return e.abrupt("return",c(St({severity:"info",autoHide:!0,message:"You are not moderator!!"})));case 7:return console.log("stopRecording pop",t),e.next=10,r.stopRecording(localStorage.getItem("recording_session_id"));case 10:console.log("stopRecording end",t);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=[{icon:Object(Ve.jsx)(Zt.a,{className:t.recording?i.stopRecording:i.startRecording}),title:t.recording?"Stop Recording":"Start Recording",onClick:t.recording?v:j}],g=[].concat(h);Te()&&g.splice(2,4);var m=Te()?g:h;return Object(Ve.jsx)(Ve.Fragment,{children:Object(Ve.jsxs)(qt.a,{className:i.root,children:[Object(Ve.jsxs)(b.a,{className:i.header,children:[Object(Ve.jsx)(C.a,{variant:"h6",className:i.cardTitle,children:"Activities"}),Object(Ve.jsx)(T.a,{mdUp:!0,children:Object(Ve.jsx)(en.a,{onClick:n})})]}),Object(Ve.jsx)(Jt.a,{children:m.map((function(e,t){return Object(Ve.jsx)(Ve.Fragment,{children:Object(Ve.jsxs)(Yt.a,{onClick:e.onClick,children:[Object(Ve.jsx)(Xt.a,{children:e.icon}),Object(Ve.jsx)(C.a,{variant:"inherit",children:e.title})]},t)})}))})]})})}var an=n(425);function rn(e){var t=e.children,n=e.open,o=e.onClose,a=e.top,i=Object(Le.c)((function(e){return e.layout})),r=Object(p.a)((function(e){return{drawer:{"& .MuiDrawer-paper":Object(l.a)({overflow:"hidden",top:a||"16px",bottom:"0px",right:"16px",borderRadius:"10px",height:i.mode===ye||823===window.innerHeight&&1524===window.innerWidth?"89%":"87%",width:"360px",backgroundColor:x},e.breakpoints.down("md"),{top:"15px",right:"8px",width:"351px"})},list:{padding:e.spacing(3,3,3,3),height:"93%"}}}))();return Object(Ve.jsx)(an.a,{anchor:"right",open:n,onClose:o,className:r.drawer,children:Object(Ve.jsx)(b.a,{className:r.list,role:"presentation",children:t})})}var cn=Object(p.a)((function(e){var t,n;return{root:(n={height:"44px",display:"flex",justifyContent:"space-between",alignItems:"center",bottom:"16px",width:"100%",position:"fixed",color:j},Object(l.a)(n,e.breakpoints.down("md"),{bottom:"0px",background:O,height:"72px"}),Object(l.a)(n,"& svg",(t={padding:"8px",borderRadius:"8px",marginRight:"2px"},Object(l.a)(t,e.breakpoints.down("md"),{background:x,borderRadius:"50%",marginRight:"6px !important"}),Object(l.a)(t,"&:hover",{opacity:"0.8",cursor:"pointer",color:h}),t)),n),active:{opacity:"0.8",cursor:"pointer",color:S},panTool:Object(l.a)({fontSize:"18px",padding:"12px !important",marginRight:"12px"},e.breakpoints.down("md"),{marginRight:"6px !important"}),infoContainer:{marginLeft:"20px",display:"flex",width:"350px"},separator:{marginLeft:"10px",marginRight:"10px"},screenShare:Object(l.a)({padding:"8px",marginRight:"2px",borderRadius:"8px"},e.breakpoints.down("md"),{background:x,borderRadius:"50%",marginRight:"6px"}),permissions:Object(l.a)({display:"flex",alignItems:"center",padding:"0px 5px",backgroundColor:x,borderRadius:"7.5px",marginRight:"24px"},e.breakpoints.down("sm"),{backgroundColor:"transparent",margin:"auto",position:"relative",bottom:"0px"}),end:Object(l.a)({background:"".concat(S," !important"),borderColor:"".concat(S," !important"),padding:"2px 12px !important",textAlign:"center",borderRadius:"30px !important",width:"42px",fontSize:"36px",marginRight:0,"&:hover":{opacity:"0.8",background:"".concat(S," !important"),cursor:"pointer",color:"".concat(j," !important")}},e.breakpoints.down("sm"),{padding:"8px !important",width:"40px",fontSize:"24px"}),subIcon:{border:"none !important",marginRight:"0px !important",marginLeft:"4px !important"},more:{marginRight:"0px !important"},drawer:{"& .MuiDrawer-paper":{overflowX:"hidden",top:"16px",bottom:"80px",right:"16px",borderRadius:"10px",height:"89%",width:"360px",backgroundColor:x,overflowY:"auto"}},list:{padding:e.spacing(3,3,0,3),height:"100%"},title:Object(l.a)({color:j,fontWeight:"400",marginLeft:"8px",fontSize:"28px",lineHeight:"1"},e.breakpoints.down("sm"),{marginLeft:0,fontSize:"24px"}),participantHeader:{display:"flex",alignItems:"center",justifyContent:"space-between","& svg":{color:j}},chatList:{height:"100%",padding:e.spacing(3,3,0,3)},chat:Object(l.a)({marginRight:"0px !important",fontSize:"20px",padding:"10px !important"},e.breakpoints.down("md"),{marginRight:"6px !important"}),moreActionList:{height:"100%",width:"260px",padding:e.spacing(1,0,0,0),backgroundColor:x}}})),sn=function(e){var t=e.dominantSpeakerId,n=Object(c.f)(),i=Object(Le.c)((function(e){return e.localTrack})).find((function(e){return e.isAudioTrack()})),r=Object(Le.c)((function(e){return e.localTrack})).find((function(e){return e.isVideoTrack()})),p=cn(),f=Object(Le.b)(),j=Object(Le.c)((function(e){return e.conference})),v=(Object(Le.c)((function(e){return e.localTrack})),Object(o.useState)(Ne(new Date))),h=Object(u.a)(v,2),g=h[0],m=h[1],x=Object(Le.c)((function(e){return e.profile})),O=(Object(Le.c)((function(e){return e.layout})),Object(o.useState)({})),y=Object(u.a)(O,2),w=y[0],k=y[1],E=a.a.useState({right:!1}),I=Object(u.a)(E,2),S=I[0],C=I[1],R=function(e){w[e.key]=e.value,k(Object(ht.a)({},w))},_=function(){var e=Object(d.a)(Object(s.a)().mark((function e(){return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===i||void 0===i?void 0:i.mute();case 2:f(ve());case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=Object(d.a)(Object(s.a)().mark((function e(){return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===i||void 0===i?void 0:i.unmute();case 2:f(ve());case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=Object(d.a)(Object(s.a)().mark((function e(){return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===r||void 0===r?void 0:r.mute();case 2:f(ve());case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=Object(d.a)(Object(s.a)().mark((function e(){return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===r||void 0===r?void 0:r.unmute();case 2:f(ve());case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(e,t){return function(n){("keydown"!==n.type||"Tab"!==n.key&&"Shift"!==n.key)&&C(Object(ht.a)(Object(ht.a)({},S),{},Object(l.a)({},e,t)))}},M=function(e,t,n){f(it(e)),f({type:de,payload:{presentationType:t}}),R(n)};Object(o.useEffect)((function(){var e=setInterval((function(){m(Ne(new Date))}),1e3);return function(){clearInterval(e)}}),[]),Object(o.useEffect)((function(){j.getParticipantsWithoutHidden().forEach((function(e){var t;null!==(t=e._properties)&&void 0!==t&&t.recording&&R({key:"recording",value:!0})})),j.addEventListener(N.a.events.conference.RECORDER_STATE_CHANGED,(function(e){"on"===e._status&&"file"===e._mode&&(j.setLocalParticipantProperty("recording",!0),f(tn({autoHide:!0,message:"Recording started"})),R({key:"recording",value:!0}),localStorage.setItem("recording_session_id",null===e||void 0===e?void 0:e._sessionID)),"off"===e._status&&"file"===e._mode&&(j.removeLocalParticipantProperty("recording"),f(tn({autoHide:!0,message:"Recording stopped"})),R({key:"recording",value:!1})),"file"===e._mode&&e._error&&(j.removeLocalParticipantProperty("recording"),f(tn({autoHide:!0,message:Ee[e._error]})),R({key:"recording",value:!1}))}))}),[]);var H=function(){f({type:"CLEAR_ALL"}),n.push("/leave")};return Object(Ve.jsxs)(b.a,{id:"footer",className:p.root,children:[Object(Ve.jsx)(T.a,{smDown:!0,children:Object(Ve.jsxs)(b.a,{className:p.infoContainer,children:[Object(Ve.jsx)(b.a,{children:g}),Object(Ve.jsx)(b.a,{className:p.separator,children:"|"}),Object(Ve.jsx)(b.a,{children:x.meetingTitle})]})}),Object(Ve.jsx)(T.a,{smDown:!0,children:Object(Ve.jsx)(At,{title:"Leave Call",children:Object(Ve.jsx)(Vt.a,{onClick:H,className:p.end})})}),Object(Ve.jsxs)(b.a,{className:p.permissions,children:[Object(Ve.jsx)(At,{title:i?null!==i&&void 0!==i&&i.isMuted()?"Unmute Audio":"Mute Audio":"Check the mic or Speaker",children:i?null!==i&&void 0!==i&&i.isMuted()?Object(Ve.jsx)(He.a,{onClick:L,className:p.active}):Object(Ve.jsx)(Pe.a,{onClick:_}):Object(Ve.jsx)(Pe.a,{onClick:_,style:{cursor:"unset"}})}),Object(Ve.jsx)(At,{title:null!==r&&void 0!==r&&r.isMuted()?"Unmute Video":"Mute Video",children:null!==r&&void 0!==r&&r.isMuted()?Object(Ve.jsx)(Ue.a,{onClick:D,className:p.active}):Object(Ve.jsx)(Be.a,{onClick:A})}),Object(Ve.jsx)(T.a,{mdUp:!0,children:Object(Ve.jsx)(At,{title:"Leave Call",children:Object(Ve.jsx)(Vt.a,{onClick:H,className:p.end})})}),Object(Ve.jsx)(At,{title:"More Actions",children:Object(Ve.jsx)(Gt.a,{onClick:P("right",!0),className:p.more})}),Object(Ve.jsx)(rn,{open:S.right,onClose:P("right",!1),children:Object(Ve.jsx)(Ve.Fragment,{children:Object(Ve.jsx)(on,{dominantSpeakerId:t,action:R,featureStates:w,setLayoutAndFeature:M,onClick:P("right",!1),participantTitle:"Participants Details",chatTitle:"Chat Box"})})})]})]})},dn=n(409),un=n(413),ln=n(411),pn=n(412),bn=n(410),fn=n(404),jn=n(60),vn=Object(p.a)((function(e){return{dialog:Object(l.a)({"& .MuiPaper-root":Object(l.a)({background:x,borderRadius:"7.5px",color:j,boxShadow:"0px 0px 1px 0px rgb(255 255 255 / 20%), 0px 1px 1px 1px rgb(255 255 255 / 14%), 0px 2px 4px 5px rgb(255 255 255 / 12%)"},e.breakpoints.down("sm"),{boxShadow:"none"}),"& p":{color:j}},e.breakpoints.down("sm"),{height:"200px",boxShadow:"none"}),anchor:{color:x,textDecoration:"none",border:"1px solid ".concat(g),padding:e.spacing(1,5),borderRadius:"15px",fontWeight:"900",textTransform:"capitalize","&:hover":{color:g}}}}));function hn(e){var t=e.open,n=vn(),o=Object(jn.a)(),a=(Object(c.f)(),Object(fn.a)(o.breakpoints.down("sm"))),i=function(){window.location.reload()};return Object(Ve.jsx)("div",{children:Object(Ve.jsxs)(dn.a,{fullScreen:a,open:t,onClose:i,"aria-labelledby":"responsive-dialog-title",className:n.dialog,children:[Object(Ve.jsx)(bn.a,{id:"responsive-dialog-title",children:"Disconnected"}),Object(Ve.jsx)(ln.a,{children:Object(Ve.jsx)(pn.a,{children:"You have disconnected, Please reconnect again."})}),Object(Ve.jsx)(un.a,{children:Object(Ve.jsx)(Nt,{onClick:i,autoFocus:!0,buttonText:"Reconnect",top:"0px",width:"100px"})})]})})}var gn=function(e){var t=e.remoteTracks,n=e.localTracks,o=e.dominantSpeakerId,a=e.panelHeight,i=e.gridItemWidth,r=e.gridItemHeight,c=e.largeVideoId,s=e.isPresenter,d=Object(Le.c)((function(e){return e.conference})),u=Object(Le.c)((function(e){return e.layout})),f=Object(p.a)((function(e){return{root:{overflowY:"auto",alignItems:"center","& > div":{marginBottom:u.mode===ye?"0px":"16px",marginTop:u.mode===ye?"16px":"0px"}}}})),j=Object(ht.a)(Object(ht.a)({},t),{},Object(l.a)({},d.myUserId(),n)),v=[].concat(Object(ge.a)(d.getParticipantsWithoutHidden()),[{_identity:{user:d.getLocalUser()},_id:d.myUserId()}]),h=f(),g=lt()(h.root,{fullmode:u.mode===ye});return v.filter((function(e){return u.presenterParticipantIds.indexOf(e._id)>=0})).forEach((function(e){v.push(Object(ht.a)(Object(ht.a)({},e),{},{presenter:!0}))})),s&&c?v=v.filter((function(e){return!(e.presenter&&e._id===c)})):c&&(v=v.filter((function(e){return!(e._id===c&&!e.presenter)}))),v.length<=0?null:Object(Ve.jsx)(b.a,{style:{height:"".concat(a,"px")},className:g,children:v.map((function(e){var t;return Object(Ve.jsx)(Ot,{localUserId:d.myUserId(),width:i,height:r,isPresenter:!!e.presenter,isFilmstrip:!1,isActiveSpeaker:o===e._id,participantDetails:null===e||void 0===e||null===(t=e._identity)||void 0===t?void 0:t.user,participantTracks:j[e._id]})}))})},mn=Object(p.a)((function(e){return{root:{display:"flex","& .fullmode":{position:"absolute",right:"16px"}}}})),xn=function(e){var t,n,a,i,r,c,s,d,p,f=e.dominantSpeakerId,j=Object(Le.c)((function(e){return e.conference})),v=Object(Le.c)((function(e){return e.layout})),h=(null===j||void 0===j?void 0:j.getParticipantCount())+v.presenterParticipantIds.length,g=function(e){var t=Object(Le.c)((function(e){return e.layout})),n=Object(Le.c)((function(e){return e.remoteTrack})),a=(Object(Le.c)((function(e){return e.conference})),Object(o.useState)({viewportWidth:void 0,viewportHeight:void 0})),i=Object(u.a)(a,2),r=i[0],c=i[1];function s(t,n){var o=Math.max(document.documentElement.clientWidth||0,window.innerWidth||0),a=Math.max(document.documentElement.clientHeight||0,window.innerHeight||0);return t===ye?{viewportWidth:o,viewportHeight:a-108}:1===e&&"PRESENTATION"!==n?{viewportWidth:Te()?o-12:16*(a-92)/9,viewportHeight:a-92}:n===we?{viewportWidth:o,viewportHeight:a-92}:{viewportWidth:o-218,viewportHeight:a-92}}function d(){c(s(t.mode,t.type))}return Object(o.useEffect)((function(){return c(s(t.mode,t.type)),window.removeEventListener("resize",d),function(){window.addEventListener("resize",d)}}),[t.mode,t.type]),Object(o.useEffect)((function(){c(s(t.mode,t.type))}),[n,e]),Object(o.useEffect)((function(){return d(),window.addEventListener("resize",d),function(){return window.removeEventListener("resize",d)}}),[t.mode,t.type]),r}(h),m=g.viewportWidth,x=g.viewportHeight,O=$e(),y=(O.documentWidth,O.documentHeight),w=Object(Le.c)((function(e){return e.localTrack})),k=Object(Le.c)((function(e){return e.remoteTrack})),E=Object(Le.c)((function(e){var t;return null===(t=e.media)||void 0===t?void 0:t.resolution})),I=j.myUserId(),S=mn();2===j.getParticipantCount()&&(i=null===(p=j.getParticipantsWithoutHidden()[0])||void 0===p?void 0:p._id);i=v.pinnedParticipant.participantId||v.presenterParticipantIds.slice(0).pop()||i||f||I,r=v.presenterParticipantIds.find((function(e){return e===i})),!1===v.pinnedParticipant.isPresenter&&(r=!1),c=k[i],s=null===(t=j.participants[i])||void 0===t||null===(n=t._identity)||void 0===n?void 0:n.user,i===j.myUserId()&&(c=w,s=j.getLocalUser());var T=null===(a=c)||void 0===a?void 0:a.find((function(e){return"camera"===e.getVideoType()})),C={lastN:25,colibriClass:"ReceiverVideoConstraints",selectedSources:[],defaultConstraints:{maxHeight:180},onStageSources:[null===T||void 0===T?void 0:T.getSourceName()],constraints:Object(l.a)({},null===T||void 0===T?void 0:T.getSourceName(),{maxHeight:(null===v||void 0===v?void 0:v.resolution[i])||E})};if(r){var R,N=null===(R=c)||void 0===R?void 0:R.find((function(e){return"desktop"===e.getVideoType()}));C.onStageSources=[null===N||void 0===N?void 0:N.getSourceName()],C.selectedSources=[null===N||void 0===N?void 0:N.getSourceName()],C.constraints=Object(l.a)({},null===N||void 0===N?void 0:N.getSourceName(),{maxHeight:2160})}j.setReceiverConstraints(C);var _=lt()(S.root,{fullmode:v.mode===ye});return d="center",h>1&&v.mode!==ye&&(m-=48,d="space-evenly"),Object(Ve.jsxs)(b.a,{style:{justifyContent:d},className:_,children:[Object(Ve.jsx)(Ot,{isFilmstrip:!0,isTranscription:!0,width:m,height:x,isLargeVideo:!0,isActiveSpeaker:i===f,isPresenter:r,participantDetails:s,participantTracks:c,localUserId:j.myUserId()}),Object(Ve.jsx)(gn,{isPresenter:r,panelHeight:v.mode===ye?y-108:y-88,gridItemWidth:218,gridItemHeight:123,dominantSpeakerId:f,largeVideoId:i,localTracks:w,remoteTracks:k})]})},On=Object(p.a)((function(){var e;return{root:(e={position:"absolute",color:j,alignItems:"center",display:"flex"},Object(l.a)(e,"position","absolute"),Object(l.a)(e,"alignItems","center"),Object(l.a)(e,"left","100px"),Object(l.a)(e,"bottom","50px"),Object(l.a)(e,"background","grey"),Object(l.a)(e,"height","50px"),Object(l.a)(e,"paddingLeft","20px"),Object(l.a)(e,"paddingRight","20px"),e)}})),yn=function(e){var t=e.snackbar,n=On(),a=Object(o.useState)(!1),i=Object(u.a)(a,2),r=i[0],c=i[1];return Object(o.useEffect)((function(){t&&(c(!0),null!==t&&void 0!==t&&t.autoHide&&setTimeout((function(){return c(!1)}),2e3))}),[t]),Object(Ve.jsx)(Ve.Fragment,{children:r&&t.message&&Object(Ve.jsx)(b.a,{className:n.root,children:t.message})})},wn=n(414),kn=Object(p.a)((function(e){return{root:Object(l.a)({position:"absolute",top:0,width:"400px",left:0,right:0,margin:"0 auto",padding:"50px","& > div":{padding:"20px"}},e.breakpoints.down("sm"),{width:"100%",padding:"0px"}),card:Object(l.a)({background:O,color:j},e.breakpoints.down("sm"),{background:x}),controls:{textAlign:"right",marginTop:"20px"}}}));function En(e){var t=e.displayName,n=e.allowLobbyAccess,o=e.denyLobbyAccess,a=e.userId,i=kn();return Object(Ve.jsx)("div",{className:i.root,children:Object(Ve.jsxs)(wn.a,{className:i.card,children:[Object(Ve.jsxs)("div",{children:[t," wants to join "]}),Object(Ve.jsxs)("div",{className:i.controls,children:[Object(Ve.jsx)(Nt,{buttonText:"Deny",onClick:function(){return o(a)},width:"100px"}),"\xa0 \xa0",Object(Ve.jsx)(Nt,{buttonText:"Allow",onClick:function(){return n(a)},width:"100px"})]})]})})}var In=function(){var e=Object(Le.b)(),t=Object(Le.c)((function(e){return e.localTrack})),n=Object(Le.c)((function(e){return e.conference})),a=Object(Le.c)((function(e){return e.connection})),i=Object(Le.c)((function(e){return e.layout})),r=Object(Le.c)((function(e){return e.notification})),c=Object(Le.c)((function(e){return e.snackbar})),l=function(){var e=Object(o.useState)(window.navigator.onLine),t=Object(u.a)(e,2),n=t[0],a=t[1];return Object(o.useEffect)((function(){function e(){a(!0)}function t(){a(!1)}return window.addEventListener("online",e),window.addEventListener("offline",t),function(){window.removeEventListener("online",e),window.removeEventListener("offline",t)}}),[]),n}(),f=Object(Le.c)((function(e){var t;return null===(t=e.media)||void 0===t?void 0:t.resolution})),j=Object(o.useState)(null),v=Object(u.a)(j,2),h=v[0],g=v[1],m=Object(o.useState)([]),x=Object(u.a)(m,2),y=x[0],w=x[1],k=Object(Le.c)((function(e){var t;return null===e||void 0===e||null===(t=e.media)||void 0===t?void 0:t.devices})),E=Object(p.a)((function(e){return{root:{display:"flex",flexDirection:"column",background:O,minHeight:i.mode===ye?"100vh":"calc(100vh - 16px)"}}}))(),I=!0,S=function(e){n.lobbyApproveAccess(e),w((function(t){return t.filter((function(t){return t.id!==e}))}))},T=function(e){n.lobbyDenyAccess(e),w((function(t){return t.filter((function(t){return t.id!==e}))}))},C=function(){var o=Object(d.a)(Object(s.a)().mark((function o(a){var i,r,c,d,l,p,b,j,v,h,g,m,x,O,y,w,E,I,S,T,C,R;return Object(s.a)().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(k&&(b=k.filter((function(e){return"default"===e.deviceId})),j=b.find((function(e){return"audioinput"===e.kind})),v=b.find((function(e){return"audiooutput"===e.kind})),h=k.filter((function(e){return"videoinput"===e.kind}))),g=a.filter((function(e){return"default"===e.deviceId})),m=g.find((function(e){return"audioinput"===e.kind})),x=g.find((function(e){return"audiooutput"===e.kind})),O=g.find((function(e){return"videoinput"===e.kind})),null===m||void 0===m||!m.label||null===(i=j)||void 0===i||!i.label||(null===m||void 0===m?void 0:m.label)===(null===(r=j)||void 0===r?void 0:r.label)){o.next=16;break}return y=t.find((function(e){return"audio"===e.getType()})),o.next=9,N.a.createLocalTracks({devices:["audio"],micDeviceId:"default"});case 9:return w=o.sent,E=Object(u.a)(w,1),I=E[0],e({type:q,payload:"default"}),o.next=15,n.replaceTrack(y,I);case 15:console.log("audio input update done!!!!");case 16:if(null===O||void 0===O||!O.label||null===(c=h)||void 0===c||!c.label||(null===O||void 0===O?void 0:O.label)===(null===(d=h)||void 0===d?void 0:d.label)){o.next=27;break}return S=t.find((function(e){return"video"===e.getType()})),o.next=20,N.a.createLocalTracks({devices:["video"],cameraDeviceId:"default",resolution:f});case 20:return T=o.sent,C=Object(u.a)(T,1),R=C[0],e(Mt("default")),o.next=26,n.replaceTrack(S,R);case 26:console.log("video input update done!!!!");case 27:null!==x&&void 0!==x&&x.label&&null!==(l=v)&&void 0!==l&&l.label&&(null===x||void 0===x?void 0:x.label)!==(null===(p=v)||void 0===p?void 0:p.label)&&(N.a.mediaDevices.setAudioOutputDevice(x.deviceId),console.log("audio output update done!!!!")),e(Pt(a)),k=a;case 30:case"end":return o.stop()}}),o)})));return function(e){return o.apply(this,arguments)}}(),R=function(e){N.a.mediaDevices.setAudioOutputDevice(e)},_=function(){var e=Object(d.a)(Object(s.a)().mark((function e(){var o,i,r;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===n||void 0===n||!n.isJoined()){e.next=3;break}return e.next=3,null===n||void 0===n?void 0:n.leave();case 3:o=Object(Ut.a)(t),e.prev=4,o.s();case 6:if((i=o.n()).done){e.next=12;break}return r=i.value,e.next=10,r.dispose();case 10:e.next=6;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(4),o.e(e.t0);case 17:return e.prev=17,o.f(),e.finish(17);case 20:return e.next=22,null===a||void 0===a?void 0:a.disconnect();case 22:N.a.mediaDevices.removeEventListener(N.a.mediaDevices.DEVICE_LIST_CHANGED,C);case 23:case"end":return e.stop()}}),e,null,[[4,14,17,20]])})));return function(){return e.apply(this,arguments)}}();if(Object(o.useEffect)((function(){if(n)return n.addEventListener(N.a.events.conference.TRACK_REMOVED,(function(t){e(function(e){return{type:V,payload:e}}(t))})),n.addEventListener(N.a.events.conference.TRACK_ADDED,(function(t){t.isLocal()||e(function(e){return{type:U,payload:e}}(t))})),n.addEventListener(N.a.events.conference.TRACK_MUTE_CHANGED,(function(t){e({type:K})})),n.addEventListener(N.a.events.conference.DOMINANT_SPEAKER_CHANGED,(function(e){console.log("DOMINANT_SPEAKER_CHANGED",e),g(e)})),n.addEventListener(N.a.events.conference.LOBBY_USER_JOINED,(function(e,t){new Audio("https://sdk.sariska.io/knock_0b1ea0a45173ae6c10b084bbca23bae2.ogg").play(),w((function(n){return[].concat(Object(ge.a)(n),[{id:e,displayName:t}])}))})),n.addEventListener(N.a.events.conference.TRACK_AUDIO_LEVEL_CHANGED,(function(t,n){e({type:ne,payload:{participantId:t,audioLevel:n}})})),n.addEventListener(N.a.events.conference.CONNECTION_INTERRUPTED,(function(){e(St({message:"You lost your internet connection. Trying to reconnect...",severity:"info"})),I=!1})),n.addEventListener(N.a.events.conference.ENDPOINT_MESSAGE_RECEIVED,function(){var e=Object(d.a)(Object(s.a)().mark((function e(t,n){return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"LOBBY-ACCESS-GRANTED"!==n.event&&"LOBBY-ACCESS-DENIED"!==n.event||w((function(e){return e.filter((function(e){return e.displayName!==n.name}))}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),n.addEventListener(N.a.events.conference.CONNECTION_RESTORED,(function(){I||e(St({message:"Your Internet connection was restored",autoHide:!0,severity:"info"}))})),N.a.effects.createRnnoiseProcessor(),N.a.mediaDevices.addEventListener(N.a.events.mediaDevices.DEVICE_LIST_CHANGED,C),N.a.mediaDevices.addEventListener(N.a.events.mediaDevices.AUDIO_OUTPUT_DEVICE_CHANGED,R),window.addEventListener("beforeunload",_),function(){_()}}),[n]),Object(o.useEffect)((function(){if(n){var t=function(t){t===h&&g(null),t===i.pinnedParticipant.participantId&&e(rt(null)),e(function(e){return{type:pe,payload:e}}(t))};return n.addEventListener(N.a.events.conference.USER_LEFT,t),function(){n.removeEventListener(N.a.events.conference.USER_LEFT,t)}}}),[n,i]),Object(o.useEffect)((function(){N.a.setNetworkInfo({isOnline:l})}),[l]),Object(o.useEffect)((function(){Te()&&i.type===ke&&e(it(we))}),[]),!n||!n.isJoined())return Object(Ve.jsx)(zt,{});var L="space-between",A=16;return i.mode===ye&&(L="space-around",A=0),Object(Ve.jsxs)(b.a,{style:{justifyContent:L,paddingTop:A},className:E.root,children:[i.type===ke&&Object(Ve.jsx)(xn,{dominantSpeakerId:h}),Object(Ve.jsx)(sn,{dominantSpeakerId:h}),y.map((function(e){return Object(Ve.jsx)(En,{denyLobbyAccess:T,allowLobbyAccess:S,userId:e.id,displayName:e.displayName})})),Object(Ve.jsx)(Ct,{notification:r}),Object(Ve.jsx)(hn,{open:"lost"===i.disconnected}),Object(Ve.jsx)(yn,{snackbar:c})]})};var Sn,Tn=function(){return Object(Ve.jsx)(o.Fragment,{children:Object(Ve.jsxs)(c.c,{children:[Object(Ve.jsx)(c.a,{exact:!0,path:"/leave",component:Ft}),Object(Ve.jsx)(c.a,{exact:!0,path:"/:meetingId",component:In}),Object(Ve.jsx)(c.a,{exact:!0,path:"/",component:zt})]})})},Cn=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,427)).then((function(t){var n=t.getCLS,o=t.getFID,a=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),o(e),a(e),i(e),r(e)}))},Rn=n(96),Nn=n(137),_n=n(290),Ln=n.n(_n),An=n(291),Dn={},Pn=[],Mn={type:Te()?we:ke,mode:Oe,pinnedParticipant:{},presenterParticipantIds:[],raisedHandParticipantIds:{},disconnected:null,resolution:{},presentationType:null,moderator:{}},Hn=Object(ht.a)({},Mn),zn=[],Bn={unreadMessage:0},Fn={microphone:"",speaker:"",camera:"",devices:null,resolution:720,aspectRatio:16/9},Un={},Wn=[],Vn={severity:"success",autoHide:!0},Kn={name:"",text:""},Gn={severity:"success",autoHide:!0},Jn=Object(Nn.b)({conference:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case D:return e=t.payload;case M:return e=null;case"GET_CONFERENCE":return e=t.payload;default:return e}},connection:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P:return e=t.payload;case z:return e=null;default:return e}},remoteTrack:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dn,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case U:return t[Sn=n.payload.getParticipantId()]||(t[Sn]=[]),t[Sn].push(n.payload),Object(ht.a)({},t);case W:var o=t[Sn=n.payload.getParticipantId()].findIndex((function(e){return e.getId()===n.payload.getId()}));return t[Sn][o]=n.payload,Object(ht.a)({},t);case V:return(Sn=n.payload.getParticipantId())&&(t[Sn]=t[Sn].filter((function(e){return e.getId()!==n.payload.getId()}))),0===(null===(e=t[Sn])||void 0===e?void 0:e.length)&&delete t[Sn],Object(ht.a)({},t);case"REMOVE_ALL_REMOTE_TRACK":return t={};case K:return Object(ht.a)({},t);case pe:return delete t[n.payload],Object(ht.a)({},t);default:return t}},localTrack:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _:return e.push(t.payload),Object(ge.a)(e);case L:var n=e.findIndex((function(e){return e.getId()===t.payload.track.getId()}));return e[n]=t.payload.newTrack,Object(ge.a)(e);case A:return e=e.filter((function(e){return e.getId()!==t.payload.getId()})),t.payload.dispose(),Object(ge.a)(e);case F:return Object(ge.a)(e);case B:return e=[];default:return e}},layout:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Mn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case fe:return t.payload.resolution?e.resolution[t.payload.participantId]=t.payload.resolution:delete e.resolution[t.payload.participantId],Object(ht.a)({},e);case G:return e.type=t.payload,Object(ht.a)({},e);case J:return e.mode=t.payload,Object(ht.a)({},e);case se:return e.disconnected=t.payload,Object(ht.a)({},e);case ue:return t.payload.raiseHand?e.raisedHandParticipantIds[t.payload.participantId]=t.payload.participantId:delete e.raisedHandParticipantIds[t.payload.participantId],Object(ht.a)({},e);case le:return t.payload.isModerator&&(e.moderator[t.payload.participantId]=t.payload.participantId),Object(ht.a)({},e);case $:return t.payload.presenter?e.presenterParticipantIds.push(t.payload.participantId):e.presenterParticipantIds=e.presenterParticipantIds.filter((function(e){return e!==t.payload.participantId})),Object(ht.a)({},e);case Z:return e.pinnedParticipant=t.payload.participantId?{isPresenter:t.payload.type,participantId:t.payload.participantId}:{},Object(ht.a)({},e);case de:return e.presentationType=t.payload.presentationType,Object(ht.a)({},e);default:return e}},profile:xt,media:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case q:return e.microphone=t.payload,Object(ht.a)({},e);case X:return e.speaker=t.payload,Object(ht.a)({},e);case Q:return e.camera=t.payload,Object(ht.a)({},e);case H:return e.devices=t.payload,Object(ht.a)({},e);case be:return e.resolution=t.payload.resolution,e.aspectRatio=t.payload.aspectRatio,Object(ht.a)({},e);default:return e}},message:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zn,t=arguments.length>1?arguments[1]:void 0;return"ADD_MESSAGE"===t.type?(e.push(t.payload),Object(ge.a)(e)):e},chat:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bn,t=arguments.length>1?arguments[1]:void 0;return"UNREAD_MESSAGES"===t.type?(e.unreadMessage=t.payload,Object(ht.a)({},e)):e},color:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Un,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ee:return e[t.payload.participantId]||(e[t.payload.participantId]=t.payload.color),Object(ht.a)({},e);case te:return delete e[t.payload.participantId],Object(ht.a)({},e);default:return e}},audioIndicator:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wn,t=arguments.length>1?arguments[1]:void 0;return t.type===ne?(e[t.payload.participantId]=t.payload.audioLevel,Object(ht.a)({},e)):e},notification:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vn,t=arguments.length>1?arguments[1]:void 0;return t.type===oe?(e=t.payload,Object(ht.a)({},e)):e},subtitle:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Kn,t=arguments.length>1?arguments[1]:void 0;return"ADD_SUBTITLE"===t.type?(e.text=t.payload.text?t.payload.text:"",e.name=t.payload.name?t.payload.name:"",Object(ht.a)({},e)):e},snackbar:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gn,t=arguments.length>1?arguments[1]:void 0;return t.type===ae?(e=t.payload,Object(ht.a)({},e)):e}}),Yn=Object(Nn.d)((function(e,t){return"CLEAR_ALL"===t.type?(Hn.presenterParticipantIds=[],Hn.mode=Oe,Jn({localTrack:[],layout:Object(ht.a)({},Hn),profile:e.profile,remoteTrack:{}},t)):Jn(e,t)}),Object(Nn.c)(Object(Nn.a)(Ln.a,An.a)));window.addEventListener("beforeunload",(function(){localStorage.setItem("SariskaReduxState",JSON.stringify(Yn.getState().profile))}));var qn=n(292),Xn=n(415),Qn=Object(qn.a)({typography:{fontFamily:"'DM Sans', sans-serif"}});r.a.render(Object(Ve.jsx)(a.a.StrictMode,{children:Object(Ve.jsx)(Xn.a,{theme:Qn,children:Object(Ve.jsx)(Rn.a,{children:Object(Ve.jsx)(Le.a,{store:Yn,children:Object(Ve.jsx)(Tn,{})})})})}),document.getElementById("root")),Cn()}},[[354,1,2]]]);
//# sourceMappingURL=main.da7d49c2.chunk.js.map